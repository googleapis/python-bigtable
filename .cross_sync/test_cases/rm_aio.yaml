tests:
  - description: "remove await"
    before: |
        CrossSync.rm_aio(await routine())
    transformers: [RmAioFunctions]
    after: |
        routine()
  - description: "async for loop fn"
    before: |
      async def func_name():
        async for i in CrossSync.rm_aio(range(10)):
            await routine()
        return 42
    transformers: [RmAioFunctions]
    after: |
      async def func_name():
        for i in range(10):
            await routine()
        return 42

  - description: "async with statement"
    before: |
      async def func_name():
        async with CrossSync.rm_aio(context_manager()) as cm:
            await do_something(cm)
    transformers: [RmAioFunctions]
    after: |
      async def func_name():
        with context_manager() as cm:
            await do_something(cm)

  - description: "list comprehension with async for"
    before: |
      async def func_name():
        result = CrossSync.rm_aio([x async for x in aiter() if await predicate(x)])
    transformers: [RmAioFunctions]
    after: |
      async def func_name():
        result = [x for x in aiter() if predicate(x)]

  - description: "multiple async features in one call"
    before: |
        CrossSync.rm_aio([x async for x in aiter() if await predicate(x)] + await routine())
    transformers: [RmAioFunctions]
    after: |
      [x for x in aiter() if predicate(x)] + routine()

  - description: "do nothing with no CrossSync.rm_aio"
    before: |
      async def nested_async():
        async with outer_context():
          async for x in outer_iter():
            async with inner_context(x):
              async for y in inner_iter(x):
                await process(x, y)
    transformers: [RmAioFunctions]
    after: |
      async def nested_async():
        async with outer_context():
          async for x in outer_iter():
            async with inner_context(x):
              async for y in inner_iter(x):
                await process(x, y)
